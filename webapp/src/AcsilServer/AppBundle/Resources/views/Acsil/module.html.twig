{% extends '::base.html.twig' %}
{#BLOCK TITRE#}
{% block title %}Modules Management{% endblock %}

{% block stylesheets %}
{{ parent() }}
{% stylesheets filter='cssrewrite' '@AcsilServerAppBundle/Resources/public/css/*' %}
<link href="{{ asset('public/css/style.css') }}" rel="stylesheet" />
<link href="{{ asset('public/css/style_responsive.css') }}" rel="stylesheet" />
<link href="{{ asset('public/css/style_default.css') }}" rel="stylesheet"  id="style_color" />
<link href="{{ asset('public/css/jquery.fancybox.css') }}" rel="stylesheet" />
<link href="{{ asset('public/css/uniform.default.css') }}" rel="stylesheet" type="text/css"/> 
{% endstylesheets %} 
{% endblock %}

{# Page for modules #}

{% block body %}
<script src="{{ asset('bundles/fosjsrouting/js/router.js') }}"></script>
<script src="{{ path('fos_js_routing_js', {"callback": "fos.Router.setData"}) }}"></script>


<div id="ModuleList" class="row-fluid">
  <div id="addModule" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <h2>{{ 'Upload new module'|trans }}</h2>
    {% include 'AcsilServerAppBundle:Upload:uploadModule.html.twig' %}
  </div><!-- addModule -->
  
  
  
</div>

<div class="row-fluid">
  <div class="col-md-2">
    <ul class="nav nav-pills">
      <li class="active"><a href="#addModule" data-toggle="modal"><i class="icon-plus"></i> {{ 'Add Module'|trans }} </a></li>
    </ul>
    <div class="btn-group">			
      {% for mod in listAllModules %}

      <div class="dropdown">
	<a class="btn btn-primary"  href="{{ path('_module', {'moduleId': mod.id|default(0)}) }}"><i class="icon-edit icon-white"></i> {{  mod.name|trans }}</a>
	<button class="btn btn-primary dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-expanded="true">
	  <span class="caret"></span>
	</button>
	<ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu1">
	  <li role="presentation"><a role="menuitem" tabindex="-1" href="{{ path('_module', {'moduleId': mod.id|default(0)}) }}">{{ 'Launch'|trans }}</a></li>
	  <li role="presentation"><a role="menuitem" tabindex="-1" href="{{ path('_delete_module', {'moduleId': mod.id|default(0)}) }}">{{ 'Delete'|trans }}</a></li>
	</ul>
      </div>
      <br/>
      {% endfor %}
    </div>
  </div>
  <div class="col-md-9">

    {% if currentCode != null %}

    <div id="plugin">
    </div>

    <script type="text/javascript">
        var token = "{{token}}";
	var serverUrl = window.location.href.toString();
	serverUrl = serverUrl.substr(0, serverUrl.indexOf(".php") + 4);
	serverUrl += "/service/1/op/";
	var uploadUrl =  serverUrl.substr(0, serverUrl.indexOf("app_dev.php"));
      	uploadUrl += "uploads/";
	{{ currentCode | raw }}
    </script>
    {% endif %}
  </div>
</div>
  {% endblock %}
  
